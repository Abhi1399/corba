//StringOperation.idl 
	
module SimpleString 
{ 
interface StringOperation 
{ 
string get_String(in string symbol); 
}; 
}; 



//StringOperationImpl.java 


import org.omg.CosNaming.*; 
import org.omg.CORBA.*; 
import SimpleString.*; 
import java.util.*; 
import java.io.*; 
import java.lang.*; 
import java.io.DataInputStream; 
public class StringOperationImpl extends _StringOperationImplBase 
{ 
public String get_String(String symbol) 
{ 
Scanner sc = new Scanner(System.in); 
DataInputStream din=new DataInputStream(System.in); 
System.out.println("1.Get Length"); 
System.out.println("2.Join Two Java Strings"); 
System.out.println("3.Compare two Strings"); 
System.out.println("4.Replace the character"); 
System.out.println("5.Reverse the String"); 
System.out.println("\nEnter your choice : "); 
int ch = sc.nextInt(); 
switch(ch) 
{ 
case 1: 
{ 
int length = symbol.length(); 
String len = String.valueOf(length); 
return len; 
} 
case 2: 
{ 
try{ 
System.out.println("\nEnter the String to concat : "); 
String str =din.readLine(); 
String joinedString = symbol.concat(str); 
return joinedString; 
} 
catch(Exception e) 
{ 
e.printStackTrace(); 
} 
} 
case 3: 
{ 
try{ 
System.out.println("\nEnter the String to compare : "); 
String str2 =din.readLine(); 
boolean result1 = symbol.equals(str2); 
return String.valueOf(result1); 
} 
catch(Exception e) 
{ 
e.printStackTrace(); 
} 
} 
case 4: 
{ 
System.out.print("Input a character to be replaced : "); 
char c = sc.next().charAt(0); 
System.out.print("Input a character to be replaced with : "); 
char c1 = sc.next().charAt(0); 
return symbol.replace(c, c1); 
} 
case 5: 
{ 
StringBuilder input1 = new StringBuilder(); 
input1.append(symbol); 
input1.reverse(); 
return input1.toString(); 
} 
default: 
{ 
System.out.println("Invalid choice"); 
return "0"; 
} 
} 
} 
public StringOperationImpl() 
{ 
super(); 
} 
} 


//StringOperationServer.java 

import org.omg.CosNaming.*; 
import org.omg.CORBA.*; 
import SimpleString.*; 
public class StringOperationServer 
{ 
public static void main(String args[]) 
{ 
try 
{ 
ORB orb=ORB.init(args,null); 
StringOperationImpl stringOperationImpl = new StringOperationImpl(); 
orb.connect(stringOperationImpl); 
org.omg.CORBA.Object objRef=orb.resolve_initial_references("NameService"); 
NamingContext ncRef=NamingContextHelper.narrow(objRef); 
NameComponent nc=new NameComponent("NASDAQ",""); 
NameComponent path[]={nc}; 
ncRef.rebind(path,stringOperationImpl); 
System.out.println("Server is ready"); 
Thread.currentThread().join(); 
} 
catch(Exception e) 
{ 
e.printStackTrace(); 
} 
} 
} 

//StringOperationClient.java 

import org.omg.CosNaming.*; 
import org.omg.CORBA.*; 
import SimpleString.*; 
import java.io.DataInputStream; 
public class StringOperationClient 
{ 
public static void main(String args[]) 
{ 
try 
{ 
DataInputStream din=new DataInputStream(System.in); 
ORB orb=ORB.init(args,null); 
NamingContext ncRef=NamingContextHelper.narrow(orb.resolve_initial_references("NameService")); 
NameComponent path[]={new NameComponent("NASDAQ","")}; 
StringOperation market=StringOperationHelper.narrow(ncRef.resolve(path)); 
System.out.println("\nEnter the String : "); 
String str =din.readLine(); 
System.out.println("\nResult : " +market.get_String(str)); 
} 
catch(Exception e) 
{ 
e.printStackTrace(); 
} 
} 
} 



// sudo apt-get remove openjdk*
 sudo apt update
 sudo apt install openjdk-8-jdk openjdk-8-jre
sudo update-alternatives --config java
sudo apt update
sudo apt install openjdk-11-jdk
sudo apt-get install libjacorb-java

idlj -fall StringOperation.idl
javac SimpleString/*.java
javac StringOperationImpl.java StringOperationServer.java StringOperationClient.java
orbd -ORBInitialPort 8080
java StringOperationServer -ORBInitialPort 8080
java StringOperationClient -ORBInitialPort 8080



//1.idlj StringOperation.ldl
idlj -fall -oldImplBase StringOperation.idl
javac *.java
orbd -ORBInitialPort 8080

2.java StringOperationServer -ORBInitialPort 8080 -ORBInitialHost Localhost

final

//1.idlj -fall StringOperation.idl
javac SimpleString/*.java
javac StringOperationImpl.java StringOperationServer.java StringOperationClient.java
orbd -ORBInitialPort 8080
2.java StringOperationServer -ORBInitialPort 8080
3.java StringOperationClient -ORBInitialPort 8080 -ORBInitialHost localhost


//permanent changes
export JACORB_HOME=~/jacorb-3.9
export PATH=$PATH:$JACORB_HOME/bin
export CLASSPATH=.:$JACORB_HOME/lib/jacorb.jar:$JACORB_HOME/lib/logkit.jar:$JACORB_HOME/lib/avalon-framework.jar

idl StringOperation.idl
javac *.java SimpleString/*.java
tnameserv &
java StringOperationServer -ORBInitialPort 900
java StringOperationClient -ORBInitialPort 900


//temporary
1.export JACORB_HOME=~/jacorb-3.9
export PATH=$PATH:$JACORB_HOME/bin
export CLASSPATH=.:$JACORB_HOME/lib/jacorb.jar:$JACORB_HOME/lib/logkit.jar:$JACORB_HOME/lib/avalon-framework.jar

idl StringOperation.idl
javac SimpleString/*.java StringOperationImpl.java StringOperationServer.java StringOperationClient.java
tnameserv -ORBInitialPort 900

2.export JACORB_HOME=~/jacorb-3.9
export CLASSPATH=.:$JACORB_HOME/lib/jacorb.jar:$JACORB_HOME/lib/logkit.jar:$JACORB_HOME/lib/avalon-framework.jar
java StringOperationServer -ORBInitialPort 900

3.export JACORB_HOME=~/jacorb-3.9
export CLASSPATH=.:$JACORB_HOME/lib/jacorb.jar:$JACORB_HOME/lib/logkit.jar:$JACORB_HOME/lib/avalon-framework.jar
java StringOperationClient -ORBInitialPort 900


//optional
1.cd ~/Downloads
export JACORB_HOME=~/Downloads/jacorb-3.9
export CLASSPATH=.:$JACORB_HOME/lib/jacorb.jar:$JACORB_HOME/lib/logkit.jar:$JACORB_HOME/lib/avalon-framework.jar
$JACORB_HOME/bin/idl StringOperation.idl
javac SimpleString/*.java StringOperationImpl.java StringOperationServer.java StringOperationClient.java
2.cd ~/Downloads
$JACORB_HOME/bin/ns
3.cd ~/Downloads
java StringOperationServer -ORBInitialPort 1050 -ORBInitialHost localhost
4.cd ~/Downloads
java StringOperationClient -ORBInitialPort 1050 -ORBInitialHost localhost


//final



export JACORB_HOME=/home/ubuntu/JacORB-2.2.4
export PATH=$PATH:$JACORB_HOME/bin
export CLASSPATH=.:$JACORB_HOME/lib/jacorb.jar:$JACORB_HOME/lib/idl.jar:$JACORB_HOME/lib/logkit-1.2.jar:$JACORB_HOME/lib/avalon-framework-4.1.5.jar
cd /home/ubuntu
idl StringOperation.idl

javac SimpleString/*.java StringOperationImpl.java StringOperationServer.java StringOperationClient.java
//if issue
sudo apt update
sudo apt install openjdk-8-jdk
sudo update-alternatives --config java
sudo update-alternatives --config javac
cd /home/ubuntu
javac SimpleString/*.java StringOperationImpl.java StringOperationServer.java StringOperationClient.java


1.cd $JACORB_HOME/bin
tnameserv -ORBInitialPort 1050 &
2.cd /home/ubuntu
java StringOperationServer -ORBInitialPort 1050 -ORBInitialHost localhost
3.cd /home/ubuntu
java StringOperationClient -ORBInitialPort 1050 -ORBInitialHost localhost

